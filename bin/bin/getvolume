#!/bin/sh

status=`amixer get Master | grep %`
state=`echo $status | awk '{print $6}'`

printf '<action=`amixer -q sset Master toggle` button=1><action=`amixer -q sset Master unmute` button=45><action=`amixer -q sset Master 2dB+` button=4><action=`amixer -q sset Master 2dB-` button=5>'
printf '<fc='
if [ $state = '[on]' ]; then
    level=`echo $status | awk '{print $4}' | tr -d '[]'`
    printf '#DFAF87>'
    printf '<fn=1></fn>%4s' "$level"
else
    printf '#AF875F>'
    printf '<fn=1>  </fn>    '
fi
printf '</fc>'
printf '</action></action></action></action>'

