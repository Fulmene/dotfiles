[general]
accounts = gmail
pythonfile = ~/.offlineimap.py

[Account gmail]
localrepository = gmail-local
remoterepository = gmail-remote

[Repository gmail-local]
type = Maildir
localfolders = ~/mail/gmail
nametrans = lambda f: '[Gmail]/' + f if f in ['Drafts', 'Starred', 'Important', 'Spam', 'Trash', 'All Mail', 'Sent Mail'] else f

[Repository gmail-remote]
type = IMAP
remotehost = imap.gmail.com
remoteuser = ada.fulmina@gmail.com
sslcacertfile = /etc/ssl/certs/ca-certificates.crt
ssl = yes
starttls = no
nametrans = lambda f: f.replace('[Gmail]/', '') if f.startswith('[Gmail]/') else f
auth_mechanisms = XOAUTH2
oauth2_client_id_eval = get_client_id("gmail")
oauth2_client_secret_eval = get_client_secret("gmail")
oauth2_request_url = https://accounts.google.com/o/oauth2/token
oauth2_refresh_token_eval = get_refresh_token("gmail")

[mbnames]
enabled = yes
filename = ~/.mutt/mailboxes
header = "mailboxes "
peritem = "+%(accountname)s/%(foldername)s"
sep = " "
footer = "\n"

